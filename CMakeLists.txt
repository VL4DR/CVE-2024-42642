cmake_minimum_required(VERSION 3.15)

project(cve_mx500
	C
	ASM
)

include(cmake/dependencies.cmake)

set(CVE_TARGET_PREFIX			CVE_MX500)
set(CVE_TARGET_LIST				BUG_1;BUG_2;BUG_3)
set(LIBATAFW_TARGET_NAME		libatafw)

foreach(CVE_TARGET_SUFFIX ${CVE_TARGET_LIST})
	set(CVE_TARGET_NAME		${CVE_TARGET_PREFIX}_${CVE_TARGET_SUFFIX})
	add_executable(${CVE_TARGET_NAME}
		${CMAKE_CURRENT_SOURCE_DIR}/src/${CVE_TARGET_SUFFIX}/exploit.c
	)

	target_include_directories(${CVE_TARGET_NAME} PRIVATE
		${CMAKE_CURRENT_SOURCE_DIR}/common
	)

	target_link_libraries(${CVE_TARGET_NAME} 
		${LIBATAFW_TARGET_NAME}
	)

endforeach()
